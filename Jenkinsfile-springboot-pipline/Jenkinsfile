pipeline {
    agent any
    
    environment {
        // Configuration flexible - utilise le canal par d√©faut ou un sp√©cifique
        SLACK_CHANNEL = env.BRANCH_NAME == 'main' ? '#production' : '#development'
    }
    
    stages {
        // Vos stages ici...
    }
    
    post {
        always {
            echo "üßπ Nettoyage..."
        }
        success {
            script {
                slackSend(
                    channel: "${env.SLACK_CHANNEL}",
                    color: "good", 
                    message: """‚úÖ SUCC√àS: ${env.JOB_NAME} #${env.BUILD_NUMBER}
‚Ä¢ Branche: ${env.BRANCH_NAME}
‚Ä¢ Dur√©e: ${currentBuild.durationString}
‚Ä¢ D√©tails: ${env.BUILD_URL}"""
                )
            }
        }
        failure {
            script {
                slackSend(
                    channel: "${env.SLACK_CHANNEL}", 
                    color: "danger",
                    message: """‚ùå √âCHEC: ${env.JOB_NAME} #${env.BUILD_NUMBER}
‚Ä¢ Branche: ${env.BRANCH_NAME}
‚Ä¢ Cause: ${currentBuild.currentResult}
‚Ä¢ D√©tails: ${env.BUILD_URL}"""
                )
            }
        }
        unstable {
            script {
                slackSend(
                    channel: "${env.SLACK_CHANNEL}",
                    color: "warning",
                    message: """‚ö†Ô∏è INSTABLE: ${env.JOB_NAME} #${env.BUILD_NUMBER}
‚Ä¢ Branche: ${env.BRANCH_NAME}
‚Ä¢ D√©tails: ${env.BUILD_URL}"""
                )
            }
        }
    }
}